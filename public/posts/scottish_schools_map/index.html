<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Analysis of State Schools in Scotland: Map of Scotland with Schools | Mr. Zeynalli&#39;s Blog</title>
<meta name="keywords" content="Map building, Python, Data Visualization">
<meta name="description" content="In this project, the objective is to conduct an analysis of Scottish schools in order to derive valuable insights. In a separate article, a clustering and descriptive analysis of schools based on their deprivation rate and total number of pupils was performed. The resulting model categorized local authorities into three distinct clusters based on their average pupil count and deprivation score. The present article showcases an interactive map that visually illustrates the areas predominantly occupied by schools facing high levels of deprivation. The intention behind this is to provide guidance to charities or non-governmental organizations engaged in projects aimed at assisting school pupils. All data utilized in this analysis is publicly available and sourced from the website of the Scottish Government. Furthermore, the Postcodes.io API was employed to gather the geographical coordinates (latitude and longitude) of each school based on their respective postcodes. The code for constructing the map, as well as an API application for retrieving external information, along with the datasets employed, can be found in the project’s GitHub repository. All materials within the repository are free to be utilized for personal and commercial purposes without requiring my consent.">
<meta name="author" content="Elvin Zeynalli">
<link rel="canonical" href="http://localhost:1313/posts/scottish_schools_map/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/scottish_schools_map/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Mr. Zeynalli&#39;s Blog (Alt + H)">Mr. Zeynalli&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Analysis of State Schools in Scotland: Map of Scotland with Schools
    </h1>
    <div class="post-description">
      In this project, the objective is to conduct an analysis of Scottish schools in order to derive valuable insights. In a separate article, a clustering and descriptive analysis of schools based on their deprivation rate and total number of pupils was performed. The resulting model categorized local authorities into three distinct clusters based on their average pupil count and deprivation score. The present article showcases an interactive map that visually illustrates the areas predominantly occupied by schools facing high levels of deprivation. The intention behind this is to provide guidance to charities or non-governmental organizations engaged in projects aimed at assisting school pupils. All data utilized in this analysis is publicly available and sourced from the website of the Scottish Government. Furthermore, the Postcodes.io API was employed to gather the geographical coordinates (latitude and longitude) of each school based on their respective postcodes. The code for constructing the map, as well as an API application for retrieving external information, along with the datasets employed, can be found in the project’s GitHub repository. All materials within the repository are free to be utilized for personal and commercial purposes without requiring my consent.
    </div>
    <div class="post-meta"><span title='2023-10-09 18:33:53 +0300 +0300'>October 9, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1691 words&nbsp;·&nbsp;Elvin Zeynalli

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#postcodes-api">Postcodes API</a>
      <ul>
        <li><a href="#building-the-api-caller-object">Building the API Caller Object</a></li>
        <li><a href="#getting-the-postcodes-data">Getting the Postcodes Data</a></li>
      </ul>
    </li>
    <li><a href="#building-the-map">Building the Map</a></li>
    <li><a href="#end">End</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><p><strong>Project description</strong></p>
<ul>
<li><em>Language:</em> Python, HTML</li>
<li><em>Libraries:</em> folium, pandas, numpy, requests, json</li>
<li><em>IDE:</em> Microsoft Visual Studio Code, Jupyter Notebook</li>
<li><em>Project type:</em> Data analytics, Web scraping, Map formation, API</li>
<li><em>Keywords:</em> Scotland, schools, deprivation, map</li>
</ul>
<hr>
<p><img alt="Photo by ali elliott on Unsplash" loading="lazy" src="/images/scottish_state_schools_map/1.webp"><br>
<em>Photo by ali elliott on Unsplash</em></p>
<h2 id="postcodes-api">Postcodes API<a hidden class="anchor" aria-hidden="true" href="#postcodes-api">#</a></h2>
<p>The available contact information for the schools solely consists of their postcodes and seedcodes. Consequently, in order to accurately locate each school on a map, I required latitude and longitude values for each establishment. In my search for geolocation information, I discovered an open platform called <a href="https://postcodes.io/">Postcodes IO</a>. This platform offers a free API that allows access to the server and retrieval of geolocation information for every UK postcode. The collected data was presented in a JSON format. To obtain a comprehensive dataset from postcodes.io, I utilized various endpoints of the API, including the following:</p>
<ul>
<li><a href="https://api.postcodes.io/postcodes/">https://api.postcodes.io/postcodes/</a><em>QUERY</em> — this endpoint allowed me to query a single postcode and get its geo-information.</li>
<li><a href="https://api.postcodes.io/postcodes/">https://api.postcodes.io/postcodes/</a><em>QUERY</em>/validate — this endpoint allowed me to check the validity of the query postcode.</li>
<li><a href="https://api.postcodes.io/postcodes/terminated_postcodes/">https://api.postcodes.io/postcodes/terminated_postcodes/</a><em>QUERY</em> — this endpoint allowed me to check if the postcode has already been terminated.</li>
<li><a href="https://api.postcodes.io/postcodes/">https://api.postcodes.io/postcodes/</a><em>BULK_QUERY</em> — for the very first endpoint, the API also allowed the query of postcodes in a bulk. So, it is possible to request the information of 100 postcodes in a single request call.</li>
</ul>
<p>Upon completion of the final debugging and error handling process, the Postcodes API caller class object was ultimately concluded and subsequently archived in the designated directory for utilization in the map building application. The object is capable of providing four distinct information points pertaining to each queried postcode, namely: latitude, longitude, city, and zone. The codes necessary for constructing the API caller are available in <a href="https://github.com/mrzeynalli/scotland_schools.git">my GitHub repository</a> and can be accessed accordingly.</p>
<h3 id="building-the-api-caller-object">Building the API Caller Object<a hidden class="anchor" aria-hidden="true" href="#building-the-api-caller-object">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># import necessary libraries</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># create an object to call the API</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PostcodeApi</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># create initialiser</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="s1">&#39;https://api.postcodes.io&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># create a function to check the validity of the input postcode</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">check_validity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/postcodes/&#39;</span> <span class="o">+</span> <span class="n">p</span> <span class="o">+</span> <span class="s1">&#39;/validate&#39;</span> <span class="c1"># formulate validity endpoint</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="c1"># get the request result</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span> <span class="c1"># check if the entered postcode is valid</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Non-valid post code: </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># create a function to check if the postcode is terminated</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">check_termination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">ter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/terminated_postcodes/&#39;</span> <span class="o">+</span> <span class="n">p</span> <span class="c1"># formulate termination endpoint</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ter</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span> <span class="c1"># check if the entered postcode is terminated</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The postcode </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1"> is terminated.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">### THE REST OF THE CODES FOLLOW THE NEXT</span>
</span></span></code></pre></div><p>In order to construct the API object, I exclusively utilize the requests library, as it suffices to dispatch requests to the endpoints. Following the definition of the object’s initializer, I proceeded to establish two functions, namely <em>check_validity()</em> and <em>check_termination()</em>, which verify the accuracy of the inputted postcode and its termination status. Both functions transmit the postcode to the pertinent endpoints and assess the call status prior to forwarding it to the postcode endpoint. Subsequently, I developed functions to retrieve information for either a singular postcode or a multitude of postcodes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># create a function to request the postcode info</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_pos_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_termination</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span> <span class="c1"># apply validity check</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_validity</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span> <span class="c1"># apply termination check</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">                <span class="n">q</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/postcodes/&#39;</span> <span class="o">+</span> <span class="n">pos</span> <span class="c1"># formulate the postcode query endpoint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">result</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="c1"># collect the result in a JSON format</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="n">lat</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;latitude&#39;</span><span class="p">]</span> <span class="c1"># latitude</span>
</span></span><span class="line"><span class="cl">                <span class="n">lon</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;longitude&#39;</span><span class="p">]</span> <span class="c1"># longitude</span>
</span></span><span class="line"><span class="cl">                <span class="n">city</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;admin_district&#39;</span><span class="p">]</span> <span class="c1"># city</span>
</span></span><span class="line"><span class="cl">                <span class="n">zone</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;parliamentary_constituency&#39;</span><span class="p">]</span> <span class="c1"># zone</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;loc&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">],</span>  <span class="s1">&#39;city&#39;</span> <span class="p">:</span> <span class="n">city</span><span class="p">,</span> <span class="s1">&#39;zone&#39;</span> <span class="p">:</span> <span class="n">zone</span><span class="p">}</span> <span class="c1"># return the findings</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">    <span class="c1"># create a function to request the bulk postcodes info</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_bulk_pos_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos_bulk</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># define the URL</span>
</span></span><span class="line"><span class="cl">        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">+</span> <span class="s1">&#39;/postcodes/&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># define the JSON payload</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;postcodes&#34;</span><span class="p">:</span> <span class="n">pos_bulk</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># set the headers</span>
</span></span><span class="line"><span class="cl">        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">:</span> <span class="s2">&#34;application/json&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># send the POST request</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># check the response</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># the request was successful, and you can parse the response JSON</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># convert the result into a dictionary format</span>
</span></span><span class="line"><span class="cl">            <span class="n">result_items</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;locs&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="s1">&#39;latitude&#39;</span><span class="p">],</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="s1">&#39;longitude&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">                          <span class="k">for</span> <span class="n">r</span> 
</span></span><span class="line"><span class="cl">                          <span class="ow">in</span> <span class="n">result</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;cities&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="s1">&#39;admin_district&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">                            <span class="k">for</span> <span class="n">r</span>
</span></span><span class="line"><span class="cl">                            <span class="ow">in</span> <span class="n">result</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;zones&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="s1">&#39;parliamentary_constituency&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">                           <span class="k">for</span> <span class="n">r</span>
</span></span><span class="line"><span class="cl">                           <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">result_items</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># handle if error is encountered</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Error: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">None</span>
</span></span></code></pre></div><p>The <em>get_pos_info()</em> function is designed to retrieve information for a single postcode, following a validation process. It returns the latitude, longitude, city, and zone details in a dictionary format. On the other hand, the <em>get_bulk_pos_info()</em> function offers a more advanced functionality by accepting multiple postcodes in bulk. Notably, this function utilizes a different approach as it posts the input bulk of postcodes to the endpoint, rather than making a request to obtain the information. The postcodes are sent in a dictionary format with headers <code>{&quot;Content-Type&quot;: &quot;application/json&quot;}</code>. The returned value is a list of information for each entered postcode. Further guidance on sending bulk requests can be found in the postcodes.io <a href="https://postcodes.io/docs">documentation</a>.</p>
<h3 id="getting-the-postcodes-data">Getting the Postcodes Data<a hidden class="anchor" aria-hidden="true" href="#getting-the-postcodes-data">#</a></h3>
<p>Considering the existence of more than 2,000 schools and the limitation of the bulk request to accept only 100 postcodes at a time, it became necessary for me to iterate through the schools in batches of 100. The subsequent code effectively manages this task. Prior to this, I had prepared a dictionary named <em>&ldquo;sch_loc_info&rdquo;</em> to accommodate the additional information that would be collected.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># create a dictionary to store the collected data</span>
</span></span><span class="line"><span class="cl"><span class="n">sch_loc_info</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;locs&#39;</span> <span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;cities&#39;</span> <span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;zones&#39;</span> <span class="p">:</span> <span class="p">[]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># NOTE: When sending bulk postcodes, the API gate can only take 100 at a time. So, we request info 100 by 100</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">postcodes</span><span class="p">),</span><span class="mi">100</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sch_loc_info_100</span> <span class="o">=</span> <span class="n">PostcodeApi</span><span class="p">()</span><span class="o">.</span><span class="n">get_bulk_pos_info</span><span class="p">(</span><span class="n">postcodes</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="n">i</span><span class="p">])</span> <span class="c1"># request the info for each 100 call</span>
</span></span><span class="line"><span class="cl">    <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sch_loc_info_100</span><span class="p">[</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span> <span class="c1"># store the location info</span>
</span></span><span class="line"><span class="cl">    <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;cities&#39;</span><span class="p">]</span> <span class="o">+=</span>  <span class="n">sch_loc_info_100</span><span class="p">[</span><span class="s1">&#39;cities&#39;</span><span class="p">]</span> <span class="c1"># store the cities</span>
</span></span><span class="line"><span class="cl">    <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;zones&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sch_loc_info_100</span><span class="p">[</span><span class="s1">&#39;zones&#39;</span><span class="p">]</span> <span class="c1"># store the zones</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">postcodes</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span> <span class="c1"># include the final call which would have less than 100 postcodes.</span>
</span></span><span class="line"><span class="cl">        <span class="n">sch_loc_info_less</span> <span class="o">=</span> <span class="n">PostcodeApi</span><span class="p">()</span><span class="o">.</span><span class="n">get_bulk_pos_info</span><span class="p">(</span><span class="n">postcodes</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">postcodes</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sch_loc_info_less</span><span class="p">[</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;cities&#39;</span><span class="p">]</span> <span class="o">+=</span>  <span class="n">sch_loc_info_less</span><span class="p">[</span><span class="s1">&#39;cities&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">sch_loc_info</span><span class="p">[</span><span class="s1">&#39;zones&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sch_loc_info_less</span><span class="p">[</span><span class="s1">&#39;zones&#39;</span><span class="p">]</span>
</span></span></code></pre></div><h2 id="building-the-map">Building the Map<a hidden class="anchor" aria-hidden="true" href="#building-the-map">#</a></h2>
<p>The open-source folium library from Python was utilized to construct the map, with HTML being employed to enhance its features. The codes utilized to create the map are presented below and are accessible in the project’s <a href="https://github.com/mrzeynalli/scotland_schools.git">GitHub repository</a>. The map was generated using the code provided and was saved in an HTML format within a folder named ‘map’ in the present working directory.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Create a map centered at Edinburgh, the capital of Scotland</span>
</span></span><span class="line"><span class="cl"><span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">55.941457</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.205744</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mf">6.5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create a custom color scale from light to dark blue</span>
</span></span><span class="line"><span class="cl"><span class="n">colors</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;#08306b&#39;</span><span class="p">,</span>  <span class="c1"># Dark blue (most deprived)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;#08519c&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;#3182bd&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;#63b7f4&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;#a6e1fa&#39;</span>   <span class="c1"># Light blue (least deprived)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># length of the schools</span>
</span></span><span class="line"><span class="cl"><span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sch_df</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create circles and digits for each data point</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">school</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;School Name_x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># school name</span>
</span></span><span class="line"><span class="cl">    <span class="n">pos</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;Post Code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># postcode</span>
</span></span><span class="line"><span class="cl">    <span class="n">loc</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;locs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># location</span>
</span></span><span class="line"><span class="cl">    <span class="n">city</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;cities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># city</span>
</span></span><span class="line"><span class="cl">    <span class="n">zone</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;zones&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># zone</span>
</span></span><span class="line"><span class="cl">    <span class="n">pupils</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;Total pupils&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># total pupils</span>
</span></span><span class="line"><span class="cl">    <span class="nb">type</span> <span class="o">=</span> <span class="n">sch_df</span><span class="p">[</span><span class="s1">&#39;School Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1"># type of the school: secondary, primary, or special</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">mag</span> <span class="o">=</span> <span class="n">dep_rates</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># get the deprivation score as magnitude; 3 if the postcode is not assigned a score</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># add circle markers pointing each school</span>
</span></span><span class="line"><span class="cl">    <span class="n">folium</span><span class="o">.</span><span class="n">CircleMarker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">pupils</span><span class="o">/</span><span class="mi">100</span> <span class="k">if</span> <span class="n">pupils</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="c1"># radius equivalent to the total pupils count in each school</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">mag</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># create an HTML pop-up for each school</span>
</span></span><span class="line"><span class="cl">    <span class="n">popup_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;h3&gt;</span><span class="si">{</span><span class="n">school</span><span class="si">}</span><span class="s2">&lt;/h3&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Type:&lt;/strong&gt; </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Local Authority:&lt;/strong&gt; </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Zone:&lt;/strong&gt; </span><span class="si">{</span><span class="n">zone</span><span class="si">}</span><span class="s2">&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Pupils:&lt;/strong&gt; </span><span class="si">{</span><span class="n">pupils</span> <span class="k">if</span> <span class="n">pupils</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;N/A&#39;</span><span class="si">}</span><span class="s2">&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Deprivation:&lt;/strong&gt; </span><span class="si">{</span><span class="n">mag</span><span class="si">}</span><span class="s2">&lt;/p&gt;&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">location</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">popup</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Popup</span><span class="p">(</span><span class="n">popup_html</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="mi">150</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">DivIcon</span><span class="p">(</span><span class="n">html</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;&lt;div style=&#34;width: 0px; height: 0px;&#34;&gt;&lt;/div&gt;&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create a custom HTML legend</span>
</span></span><span class="line"><span class="cl"><span class="n">legend_html</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">&lt;div style=&#34;position: fixed; top: 10px; right: 10px; background-color: white; padding: 10px; border: 2px solid black; z-index: 1000;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;strong&gt;Legend&lt;/strong&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;span style=&#34;color: black;&#34;&gt;&lt;span style=&#34;background-color: #08306b; width: 20px; height: 20px; display: inline-block;&#34;&gt;&lt;/span&gt; 1 - Most Deprived&lt;/span&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;span style=&#34;color: black;&#34;&gt;&lt;span style=&#34;background-color: #08519c; width: 20px; height: 20px; display: inline-block;&#34;&gt;&lt;/span&gt; 2&lt;/span&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;span style=&#34;color: black;&#34;&gt;&lt;span style=&#34;background-color: #3182bd; width: 20px; height: 20px; display: inline-block;&#34;&gt;&lt;/span&gt; 3&lt;/span&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;span style=&#34;color: black;&#34;&gt;&lt;span style=&#34;background-color: #63b7f4; width: 20px; height: 20px; display: inline-block;&#34;&gt;&lt;/span&gt; 4&lt;/span&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;p&gt;&lt;span style=&#34;color: black;&#34;&gt;&lt;span style=&#34;background-color: #a6e1fa; width: 20px; height: 20px; display: inline-block;&#34;&gt;&lt;/span&gt; 5 - Least Deprived&lt;/span&gt;&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">m</span><span class="o">.</span><span class="n">get_root</span><span class="p">()</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">folium</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="n">legend_html</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create the folder to save the map</span>
</span></span><span class="line"><span class="cl"><span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span><span class="s1">&#39;map&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># save the map as an HTML file</span>
</span></span><span class="line"><span class="cl"><span class="n">m</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;scottish_schools_map.html&#39;</span><span class="p">))</span>
</span></span></code></pre></div><p>Upon clicking on a school displayed on the map, an HTML-generated pop-up menu will appear, providing relevant information about the school. Furthermore, an HTML-based legend has been created to display the range of deprivation. The code will save the file as <em>&lsquo;scottish_schools_map.html&rsquo;</em>. A screenshot of the map is presented in <strong>Image 1</strong>. The radius of the circles on the map is determined by the number of pupils in each school, with larger circles representing schools with a greater number of pupils. The intensity of the blue color indicates the level of deprivation, with darker markers indicating higher levels of deprivation in the area.</p>
<p><img alt="Image 1: Map of Scotland locating all schools (screenshot from the HTML-based app)" loading="lazy" src="/images/scottish_state_schools_map/2.webp"><br>
<em>Image 1: Map of Scotland locating all schools (screenshot from the HTML-based app)</em></p>
<p>The image presented below depicts the appearance of a pop-up menu upon clicking on a school icon (<strong>Image 2</strong>). The menu exhibits pertinent information such as the school type, local authority, zone, pupils count, and deprivation score.</p>
<p><img alt="Image 2: A pop-up information menu of Leith Academy (screenshot from the HTML-based app)" loading="lazy" src="/images/scottish_state_schools_map/3.webp"><br>
<em>Image 2: A pop-up information menu of Leith Academy (screenshot from the HTML-based app)</em></p>
<h2 id="end">End<a hidden class="anchor" aria-hidden="true" href="#end">#</a></h2>
<p>The objective of this project was to construct a map that would visually represent schools in Scotland, taking into account the number of students and deprivation score. The map was developed using the folium module. The codes and map are available for unrestricted use without my authorization. Please leave a comment if you have any inquiries or recommendations. The map could be enhanced with additional HTML, and possibly Javascript integration.</p>
<p>For information on implementing k-Means clustering to classify school data, please refer to my other article via this link.</p>
<p>For potential collaborations, please contact me at <a href="mailto:ezeynalli@hotmail.com">ezeynalli@hotmail.com</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/map-building/">Map Building</a></li>
      <li><a href="http://localhost:1313/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/tags/data-visualization/">Data Visualization</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="http://localhost:1313/posts/scottish_schools_clustering/">
    <span class="title">Next »</span>
    <br>
    <span>Analysis of State Schools in Scotland: K-Means Clustering by Deprivation Rate and Pupils Quantity</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on x"
            href="https://x.com/intent/tweet/?text=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f&amp;hashtags=MapBuilding%2cPython%2cDataVisualization">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f&amp;title=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools&amp;summary=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f&title=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on whatsapp"
            href="https://api.whatsapp.com/send?text=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on telegram"
            href="https://telegram.me/share/url?text=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Analysis of State Schools in Scotland: Map of Scotland with Schools on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Analysis%20of%20State%20Schools%20in%20Scotland%3a%20Map%20of%20Scotland%20with%20Schools&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fscottish_schools_map%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Mr. Zeynalli&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
